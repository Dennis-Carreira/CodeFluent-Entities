//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.34011
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace ContactManager.Proxy
{
    using CodeFluent.Runtime;
    using CodeFluent.Runtime.Utilities;
    
    
    // CodeFluent Entities generated (http://www.softfluent.com). Date: Thursday, 13 February 2014 19:31.
    // Build:1.0.61214.0762
    [System.CodeDom.Compiler.GeneratedCodeAttribute("CodeFluent Entities", "1.0.61214.0762")]
    [System.ComponentModel.DataObjectAttribute()]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerDisplayAttribute("Count={Count}")]
    [System.ComponentModel.TypeConverterAttribute(typeof(CodeFluent.Runtime.Design.CollectionTypeConverter))]
    [System.Runtime.Serialization.CollectionDataContractAttribute(Namespace="http://schemas.contactmanager.com", ItemName="Contact")]
    public partial class ContactCollection : CodeFluent.Runtime.ServiceModel.CodeFluentEntityCollection<string, ContactManager.Proxy.Contact>, CodeFluent.Runtime.ServiceModel.ICodeFluentSet, CodeFluent.Runtime.Diagnostics.ITraceable
    {
        
        [System.NonSerializedAttribute()]
        private System.Collections.Hashtable _relations = new System.Collections.Hashtable();
        
        [System.NonSerializedAttribute()]
        private ContactManager.Proxy.ContactSource _unspecifiedContactSourceContactSource;
        
        [System.NonSerializedAttribute()]
        private ContactManager.Proxy.User _contactsUserUser;
        
        public ContactCollection()
        {
        }
        
        public ContactCollection(ContactManager.Proxy.ContactSource unspecifiedContactSourceContactSource, ContactManager.Proxy.User contactsUserUser)
        {
            this._unspecifiedContactSourceContactSource = unspecifiedContactSourceContactSource;
            this._contactsUserUser = contactsUserUser;
        }
        
        public ContactCollection(string contextName, System.ServiceModel.Channels.IChannel channel, string pageMethodName, CodeFluent.Runtime.PageOptions pageOptions, params object[] arguments) : 
                base(contextName, channel, pageMethodName, pageOptions, arguments)
        {
        }
        
        System.Collections.IDictionary CodeFluent.Runtime.ServiceModel.ICodeFluentSet.Relations
        {
            get
            {
                return this._relations;
            }
        }
        
        [System.Xml.Serialization.XmlIgnoreAttribute()]
        public ContactManager.Proxy.ContactSource UnspecifiedContactSourceContactSource
        {
            get
            {
                return this._unspecifiedContactSourceContactSource;
            }
        }
        
        [System.Xml.Serialization.XmlIgnoreAttribute()]
        public ContactManager.Proxy.User ContactsUserUser
        {
            get
            {
                return this._contactsUserUser;
            }
        }
        
        public virtual void SaveAll()
        {
            ContactManager.Proxy.ContactCollection changed = new ContactManager.Proxy.ContactCollection();
            this.FindAllPending(changed);
            if ((changed.Count <= 0))
            {
                return;
            }
            ContactManager.Proxy.Contact.WcfClient.Current.Channel.SaveAll(changed);
            this.Commit();
        }
        
        [System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Select, true)]
        public static ContactManager.Proxy.ContactCollection PageLoadAll(int pageIndex, int pageSize, CodeFluent.Runtime.PageOptions pageOptions)
        {
            ContactManager.Proxy.ContactCollection collection = ContactManager.Proxy.Contact.WcfClient.Current.Channel.PageLoadAll(pageIndex, pageSize, pageOptions);
            collection._unspecifiedContactSourceContactSource = null;
            collection._contactsUserUser = null;
            return collection;
        }
        
        [System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Select, true)]
        public static ContactManager.Proxy.ContactCollection LoadAll()
        {
            ContactManager.Proxy.ContactCollection collection = new ContactManager.Proxy.ContactCollection(ContactManager.Proxy.Constants.ContactManagerStoreName, ((System.ServiceModel.Channels.IChannel)(ContactManager.Proxy.Contact.WcfClient.Current.Channel)), "PageLoadAll", null);
            collection._unspecifiedContactSourceContactSource = null;
            collection._contactsUserUser = null;
            collection.LoadKnownItems();
            return collection;
        }
        
        [System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Select, true)]
        public static ContactManager.Proxy.ContactCollection PageLoadByContactSource(int pageIndex, int pageSize, CodeFluent.Runtime.PageOptions pageOptions, ContactManager.Proxy.ContactSource contactSource)
        {
            if ((contactSource == null))
            {
                throw new System.ArgumentNullException("contactSource");
            }
            ContactManager.Proxy.ContactCollection collection = ContactManager.Proxy.Contact.WcfClient.Current.Channel.PageLoadByContactSource(pageIndex, pageSize, pageOptions, contactSource.EntityKey);
            collection._unspecifiedContactSourceContactSource = contactSource;
            collection._contactsUserUser = null;
            return collection;
        }
        
        [System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Select, true)]
        public static ContactManager.Proxy.ContactCollection LoadByContactSource(ContactManager.Proxy.ContactSource contactSource)
        {
            if ((contactSource == null))
            {
                throw new System.ArgumentNullException("contactSource");
            }
            ContactManager.Proxy.ContactCollection collection = new ContactManager.Proxy.ContactCollection(ContactManager.Proxy.Constants.ContactManagerStoreName, ((System.ServiceModel.Channels.IChannel)(ContactManager.Proxy.Contact.WcfClient.Current.Channel)), "PageLoadByContactSource", null, contactSource.EntityKey);
            collection._unspecifiedContactSourceContactSource = contactSource;
            collection._contactsUserUser = null;
            collection.LoadKnownItems();
            return collection;
        }
        
        [System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Select, true)]
        public static ContactManager.Proxy.ContactCollection PageLoadByUser(int pageIndex, int pageSize, CodeFluent.Runtime.PageOptions pageOptions, ContactManager.Proxy.User user)
        {
            if ((user == null))
            {
                throw new System.ArgumentNullException("user");
            }
            ContactManager.Proxy.ContactCollection collection = ContactManager.Proxy.Contact.WcfClient.Current.Channel.PageLoadByUser(pageIndex, pageSize, pageOptions, user.EntityKey);
            collection._unspecifiedContactSourceContactSource = null;
            collection._contactsUserUser = user;
            return collection;
        }
        
        [System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Select, true)]
        public static ContactManager.Proxy.ContactCollection LoadByUser(ContactManager.Proxy.User user)
        {
            if ((user == null))
            {
                throw new System.ArgumentNullException("user");
            }
            ContactManager.Proxy.ContactCollection collection = new ContactManager.Proxy.ContactCollection(ContactManager.Proxy.Constants.ContactManagerStoreName, ((System.ServiceModel.Channels.IChannel)(ContactManager.Proxy.Contact.WcfClient.Current.Channel)), "PageLoadByUser", null, user.EntityKey);
            collection._unspecifiedContactSourceContactSource = null;
            collection._contactsUserUser = user;
            collection.LoadKnownItems();
            return collection;
        }
        
        protected virtual void BaseTrace(System.CodeDom.Compiler.IndentedTextWriter writer)
        {
            writer.Write("[");
            writer.Write(string.Concat("Count=", this.Count));
            writer.Write("]");
        }
        
        public string Trace()
        {
            System.Text.StringBuilder stringBuilder = new System.Text.StringBuilder();
            System.IO.StringWriter stringWriter = new System.IO.StringWriter(stringBuilder, System.Globalization.CultureInfo.CurrentCulture);
            System.CodeDom.Compiler.IndentedTextWriter writer = new System.CodeDom.Compiler.IndentedTextWriter(stringWriter);
            this.BaseTrace(writer);
            writer.Flush();
            ((System.IDisposable)(writer)).Dispose();
            ((System.IDisposable)(stringWriter)).Dispose();
            string sr = stringBuilder.ToString();
            return sr;
        }
        
        void CodeFluent.Runtime.Diagnostics.ITraceable.Trace(System.CodeDom.Compiler.IndentedTextWriter writer)
        {
            this.BaseTrace(writer);
        }
        
        [System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Update, true)]
        public static bool Save(ContactManager.Proxy.Contact contact)
        {
            if ((contact == null))
            {
                return false;
            }
            return contact.Save();
        }
        
        [System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Delete, true)]
        public static bool Delete(ContactManager.Proxy.Contact contact)
        {
            if ((contact == null))
            {
                return false;
            }
            return contact.Delete();
        }
        
        [System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Insert, true)]
        public static bool Insert(ContactManager.Proxy.Contact contact)
        {
            if ((contact == null))
            {
                return false;
            }
            return contact.Save();
        }
        
        protected override void Add(string key, ContactManager.Proxy.Contact item)
        {
            if ((this._contactsUserUser != null))
            {
                item.User = this._contactsUserUser;
            }
            base.Add(key, item);
        }
        
        protected override void Insert(int index, string key, ContactManager.Proxy.Contact item)
        {
            if ((this._contactsUserUser != null))
            {
                item.User = this._contactsUserUser;
            }
            base.Insert(index, key, item);
        }
        
        public override bool Remove(string key)
        {
            ContactManager.Proxy.Contact item = ((ContactManager.Proxy.Contact)(base[key]));
            if ((item == null))
            {
                return false;
            }
            if ((this._contactsUserUser != null))
            {
                item.User = null;
            }
            bool ret = base.Remove(key);
            return ret;
        }
        
        protected virtual void Relate(ContactManager.Proxy.Contact item, CodeFluent.Runtime.CodeFluentRelationType relationType)
        {
            ((CodeFluent.Runtime.ServiceModel.ICodeFluentSet)(this)).Relations[item] = relationType;
        }
        
        public new virtual ContactManager.Proxy.ContactCollection Clone(bool deep)
        {
            ContactManager.Proxy.ContactCollection ret = new ContactManager.Proxy.ContactCollection();
            this.CopyTo(ret, deep);
            return ret;
        }
        
        protected override string GetUserMessage(System.Globalization.CultureInfo culture, CodeFluent.Runtime.UserExceptionType type, string name, object[] args)
        {
            return ContactManager.Proxy.Resources.Manager.GetUserMessage(culture, type, name, args);
        }
    }
}
